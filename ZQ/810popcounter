module popcounter(
    input                   clk                 ,    
    input                   rst_n               ,

    input               [31:0]      data_in     ,
    output      reg     [5:0]       counter_out
);

//variable
reg     [31:0]                 shift_reg   ;   
reg     [5:0]                  counter     ;

//Sequential Logic
always @(posedge clk or rst_n) begin
    if (!rst_n) begin
        shift_reg   <= data_in;
        counter     <= 6'b0;
        counter_out <= 6'b0;
    end 
    else if(shift_reg != 0)begin
        counter     <= counter + shift_reg[0];
        shift_reg   <= shift_reg >> 1;
    end
    else begin
        counter_out <= counter;
    end

end

endmodule
